name: Stale

on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          days-before-issue-stale: 60
          days-before-pr-stale: 30
          days-before-close: 14
          stale-issue-label: 'stale'
          stale-pr-label: 'stale'
          exempt-issue-labels: 'good first issue,help wanted,pinned'
          exempt-pr-labels: 'in-progress,work-in-progress,pending-review'
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          stale-issue-message: |
            This issue has been inactive for 60 days. It will be closed in 14 days
            unless there is new activity or it is labeled with 'good first issue',
            'help wanted', or 'pinned'.

            To prevent this issue from being closed, please:
            - Leave a comment to explain why this issue is still relevant
            - Add a comment with `!remove-stale` to remove the stale label
          stale-pr-message: |
            This pull request has been inactive for 30 days. It will be closed in 14
            days unless there is new activity or it is labeled with 'in-progress',
            'work-in-progress', or 'pending-review'.

            To prevent this PR from being closed, please:
            - Push a commit with new changes
            - Leave a comment with `!remove-stale` to remove the stale label
